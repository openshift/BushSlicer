---
:scroll_strategy: 1
:hooks:
  :click: |-
    # this will execute in the Web4Cucumber instance context
    proc { |block|
      begin
        logger.trace "Clicking web element via hook.."
        block.call
      rescue Selenium::WebDriver::Error::UnknownError,Selenium::WebDriver::Error::ElementClickInterceptedError => e
        if e.message.include? "not clickable"
          logger.warn e.inspect

          case e.message
          when /pf-c-form__actions/
            logger.info "Scrolling from action button out of view"
            scroll_by = browser.element(css: ".pf-c-form__actions").height
            #scroll_by += browser.element(css: ".pf-c-form__group.ocs-radio-group-field").height
            browser.execute_script("window.scrollBy(0,#{scroll_by})")
          when /ocs-form-footer/
            logger.info "Scrolling footer out of view"
            scroll_by = browser.element(css: ".ocs-form-footer").height
            #scroll_by += browser.element(css: ".pf-c-form__group.ocs-radio-group-field").height
            browser.execute_script("window.scrollBy(0,#{scroll_by})")
          else
            # e.g. class="modal-backdrop fade in ng-scope ng-animate ng-leave
            #   ng-leave-active"
            # we just wait repeat operation hoping the modal has fade out or
            #   possibly some unknown issue fixed itself
            logger.info "Sleeping 10 seconds when meeting other cases of the not clickable issue"
            sleep 10
          end

          block.call
        else
          logger.debug "unhandled UnknownError"
          raise
        end
      end
    }
:size: [1477,1024]
